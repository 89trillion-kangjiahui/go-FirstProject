# 需求1：【客户端调用, http】登陆功能
### http请求方法：
http  GET
### 接口地址：
localhost:8000/user/login
### 请求参数：
参数名|参数类型|注释
------------ | ------------- | -------------
uid|string|用户id
### 请求响应
参数名|参数类型|注释
------------ | ------------- | -------------
code|json|状态码
user|json|用户信息
### 具体执行流程
1. 获取前端传过来的参数uid。
2. 根据uid从mongodb中的mydb数据库中的user集合中查询是否有该用户，如果没有找到，则请求跳转到用户注册页面注册。
3. 如果找到了，则返回用户信息。

# 需求2：【客户端调用, http】注册功能
### http请求方法：
http  GET
### 接口地址：
localhost:8000/user/register
### 请求参数：
参数名|参数类型|注释
------------ | ------------- | -------------
username|string|用户名
### 请求响应
参数名|参数类型|注释
------------ | ------------- | -------------
code|json|状态码
uid|json|用户id
### 具体执行流程
1. 获取前端传过来的用户名
2. 判断用户名是否为空，如果为空，则返回内容：“重新注册，请输入用户名”，跳转回注册页面重新注册。
3. 不为空，通过函数UniqueId()获取唯一用户id。
4. 将用户信息初始化后插入到mongodb中mydb数据库中的user集合中，并将用户id返回给前端。

# 需求3：【客户端调用, http】验证礼品码接口修改：
### http请求方法：
http  GET
### 接口地址：
localhost:8000/user/check
### 请求参数：
参数名|参数类型|注释
------------ | ------------- | -------------
uid|string|用户id
code|string|礼品码
### 请求响应
参数名|参数类型|注释
------------ | ------------- | -------------
code|string|状态吗
ret|proto序列化后的[]byte|礼品信息

### proto返回值的格式
```java
    message GeneralReward {
      int32 code = 1;   //状态码
      string msg = 2;   //错误信息
      map<uint32, uint64> changes = 3; // 客户端展示奖励的部分 : 道具ID -> 道具数量
      map<uint32, uint64> balance = 4; // 道具有变化部分的当前余额 : 道具ID -> 道具数量
    }
```

### 请求响应返回的错误码以及相关的错误信息
错误码|MSG
------------ | ------------- 
200|"获得奖励"
10100|"该礼包已经被领取了"
10101|"该礼包已经被领完了"
10102|"不是指定用户领取"
10103|"超过礼品码限定日期"
20100|"该用户未注册"
30100|"该礼包码不正确"
30101|"redis中礼品内容修改失败"
40100|"json序列化失败"

### 具体的执行流程,所有返回的信息都通过proto序列化成[]byte返回结果
1. 通过礼品码从redis获取礼品内容，如果报错，返回错误信息礼包码不正确，没有报错，就证明礼包码正确
2. 将现在的领取时间和礼包内容里的有效期转为time类型比较是否超过期限，如果超过了，返回‘取时间超过限定日期’，没有则继续往下判断
3. 判断礼包的类型字段‘CodeType’
4. 如果为1，礼包类型为指定用户，限制可领取次数为1次的礼包， 判断是否被领取过，
   如果没：将已领取次数变为0，领取列表，可领取次数修改后将新的礼包内容重新放回redis，并将其中的礼包信息返回。如果有：则直接返回‘该礼包已经被领取了‘
5. 如果为2，礼包类型为不指定用户，可领取次数为固定的礼包，判断该礼包的是否可以继续领取，如果不能，则返回‘该礼包已经没有了’，如果能，
   则将已领取次数减少，领取列表，可领取次数修改后将新的礼包内容重新放回redis，并将其中的礼包信息返回。
6. 如果为3，礼包类型为不指定用户，可领取次数为无限的礼包，将已领取次数，领取列表，可领取次数修改后将新的礼包内容重新放回redis，并将其中的礼包信息返回。

